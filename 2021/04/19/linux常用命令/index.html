<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Monda:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/themes/blue/pace-theme-minimal.min.css">
  <script src="//cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/pace.min.js"></script>


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    hostname: new URL('http://blog.zhangzonglinagain.xyz').hostname,
    root: '/',
    scheme: 'Gemini',
    version: '7.7.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},
    copycode: {"enable":true,"show_result":true,"style":null},
    back2top: {"enable":true,"sidebar":true,"scrollpercent":true},
    bookmark: {"enable":true,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    comments: {"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: 'search.xml',
    motion: {"enable":true,"async":true,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}
  };
</script>

  <meta name="description" content="前言linux常用的命令，随时添加。">
<meta property="og:type" content="article">
<meta property="og:title" content="linux常用命令">
<meta property="og:url" content="http://blog.zhangzonglinagain.xyz/2021/04/19/linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/index.html">
<meta property="og:site_name" content="1.5L的喜欢">
<meta property="og:description" content="前言linux常用的命令，随时添加。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://blog.zhangzonglinagain.xyz/images/pasted-35.png">
<meta property="article:published_time" content="2021-04-19T06:49:00.000Z">
<meta property="article:modified_time" content="2023-02-18T10:21:26.956Z">
<meta property="article:author" content="zzl">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://blog.zhangzonglinagain.xyz/images/pasted-35.png">

<link rel="canonical" href="http://blog.zhangzonglinagain.xyz/2021/04/19/linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true
  };
</script>

  <title>linux常用命令 | 1.5L的喜欢</title>
  <script src="/live2d-widget/autoload.js"></script>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-156237863-1"></script>
    <script>
      if (CONFIG.hostname === location.hostname) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-156237863-1');
      }
    </script>






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="1.5L的喜欢" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">1.5L的喜欢</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签<span class="badge">65</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类<span class="badge">21</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档<span class="badge">116</span></a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>

</nav>
  <div class="site-search">
    <div class="popup search-popup">
    <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocorrect="off" autocapitalize="none"
           placeholder="搜索..." spellcheck="false"
           type="text" id="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result"></div>

</div>
<div class="search-pop-overlay"></div>

  </div>
</div>
    </header>

    
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://blog.zhangzonglinagain.xyz/2021/04/19/linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/lizi.png">
      <meta itemprop="name" content="zzl">
      <meta itemprop="description" content="哥哥姐姐的梦">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="1.5L的喜欢">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          linux常用命令
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-04-19 14:49:00" itemprop="dateCreated datePublished" datetime="2021-04-19T14:49:00+08:00">2021-04-19</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-02-18 18:21:26" itemprop="dateModified" datetime="2023-02-18T18:21:26+08:00">2023-02-18</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/linux/" itemprop="url" rel="index">
                    <span itemprop="name">linux</span>
                  </a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2021/04/19/linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/#comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2021/04/19/linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>25k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>23 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>linux常用的命令，随时添加。</p>
<a id="more"></a>
<h3 id="type"><a href="#type" class="headerlink" title="type"></a>type</h3><p>The type command is used to display information about the command type. It will show you how a given command would be interpreted if typed on the command line.<br>一般情况下，type命令被用于判断另外一个命令是否是内置命令，但是它实际上有更多的用法。  </p>
<ol>
<li><p>判断一个名字当前是否是alias、keyword、function、builtin、file或者什么都不是：</p>
<blockquote>
<p>type ls 的输出是 ls 是 `ls –color&#x3D;auto&#39; 的别名</p>
</blockquote>
<blockquote>
<p>type if 的输出是 if 是 shell 关键字</p>
</blockquote>
<blockquote>
<p>type type 的输出是 type 是 shell 内嵌</p>
</blockquote>
<blockquote>
<p>type frydsh 的输出是 bash: type: frydsh: 未找到</p>
</blockquote>
</li>
<li><p>判断一个名字当前是否是alias、keyword、function、builtin、file或者什么都不是的另一种方法（适用于脚本编程）：</p>
<blockquote>
<p>type -t ls 的输出是 alias</p>
</blockquote>
<blockquote>
<p>type -t if 的输出是 keyword</p>
</blockquote>
<blockquote>
<p>type -t type 的输出是 builtin</p>
</blockquote>
<blockquote>
<p>type -t gedit 的输出是 file</p>
</blockquote>
<blockquote>
<p>type -t frydsh 没有输出</p>
</blockquote>
</li>
<li><p>显示一个名字的所有可能：</p>
<blockquote>
<p>type -a kill 的输出是 kill 是 shell 内嵌 和 kill 是 &#x2F;bin&#x2F;kill</p>
</blockquote>
<blockquote>
<p>type -at kill 的输出是 builtin 和 file</p>
</blockquote>
</li>
<li><p>查看一个命令的执行路径（如果它是外部命令的话）：</p>
<blockquote>
<p>type -p gedit 的输出是 &#x2F;usr&#x2F;bin&#x2F;gedit</p>
</blockquote>
<blockquote>
<p>type -p kill 没有输出（因为kill是内置命令）</p>
</blockquote>
</li>
<li><p>强制搜索外部命令：</p>
<blockquote>
<p>type -P kill 的输出是 &#x2F;bin&#x2F;kill</p>
</blockquote>
</li>
</ol>
<hr>
<h3 id="ll-amp-ls"><a href="#ll-amp-ls" class="headerlink" title="ll&amp;ls"></a>ll&amp;ls</h3><p>ll is aliased to &#39;ls -alF&#39;<br><img src="/images/pasted-35.png" alt="upload successful"></p>
<p>ls 几个重要参数：</p>
<ul>
<li>-a 显示所有文件及目录 (. 开头的隐藏文件也会列出)</li>
<li>-l 除文件名称外，亦将文件型态、权限、拥有者、文件大小等资讯详细列出</li>
<li>-r 将文件以相反次序显示(原定依英文字母次序)</li>
<li>-t 将文件依建立时间之先后次序列出</li>
<li>-A 同 -a ，但不列出 “.” (目前目录) 及 “..” (父目录)</li>
<li>-F 在列出的文件名称后加一符号；例如可执行档则加 “*”, 目录则加 “&#x2F;“</li>
<li>-R 若目录下有文件，则以下之文件亦皆依序列出</li>
</ul>
<p>详细参数ls –help 查看。<br>示例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">man ls</span><br></pre></td></tr></table></figure>
<p>查看，其中-S sort by file size</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls -Sl 由大到小排序</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls -Slr 从小到大排序</span><br></pre></td></tr></table></figure>
<p>-h，表示”–human-readable”，单位是k或者M ，比较容易看清楚结果。</p>
<p>显示子目录结构</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls -R</span><br></pre></td></tr></table></figure>
<p>ls按时间排序</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ls -lt 从新到旧</span><br><span class="line">ls -lrt 从旧到新</span><br></pre></td></tr></table></figure>

<p>参考：**<u><a href="https://linux.cn/article-5109-1.html" target="_blank" rel="noopener">Linux中的15个基本‘ls’命令示例</a></u>**</p>
<hr>
<h3 id="xdg-open"><a href="#xdg-open" class="headerlink" title="xdg-open"></a>xdg-open</h3><p>有时需要从terminal打开doc pdf jpg等文件，可以用xdg-open命令。</p>
<p>xdg-open command in the Linux system is used to open a file or URL in the user’s preferred application.<br>The URL will be opened in the user’s preferred web browser if a URL is provided. The file will be opened in the preferred application for files of that type if a file is provided. xdg-open supports ftp, file, https and http URLs. This can be used inside a desktop session only. It is not recommended to use xdg-open as root. Here, the zero is an indication of success while non-zero show the failure.</p>
<p>Syntax:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xdg-open &#123;file | URL&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="sort-uniq"><a href="#sort-uniq" class="headerlink" title="sort uniq"></a>sort uniq</h3><p>字如其义：排序和去重</p>
<h4 id="sort"><a href="#sort" class="headerlink" title="sort"></a>sort</h4><p><strong>sort</strong> - sort lines of text files(对文本文件的行进行排序)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sort将文件的每一行作为一个单位，相互比较，比较原则是从首字符向后，依次按ASCII码值进行比较，最后将它们按升序输出。</span><br></pre></td></tr></table></figure>
<p>格式：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sort [OPTION]... [FILE]...</span><br></pre></td></tr></table></figure>
<p><strong>OPTION:</strong></p>
<ul>
<li>-b, –ignore-leading-blanks ignore leading blanks</li>
<li>-d, –dictionary-order consider only blanks and alphanumeric characters</li>
<li>-f, –ignore-case fold lower case to upper case characters</li>
<li>-g, –general-numeric-sort compare according to general numerical value</li>
<li>-i, –ignore-nonprinting consider only printable characters</li>
<li>-M, –month-sort compare (unknown) &lt; <code>JAN&#39; &lt; ... &lt; </code>DEC’</li>
<li>-n, –numeric-sort compare according to string numerical value</li>
<li>-r, –reverse reverse the result of comparisons</li>
</ul>
<p><strong>Other option:</strong></p>
<ul>
<li>-c, –check check whether input is sorted; do not sort</li>
<li>-k, –key&#x3D;POS1[,POS2] start a key at POS1, end it at POS2 (origin 1)</li>
<li>-m, –merge merge already sorted files; do not sort</li>
<li>-o, –output&#x3D;FILE write result to FILE instead of standard output</li>
<li>-s, –stable stabilize sort by disabling last-resort comparison</li>
<li>-S, –buffer-size&#x3D;SIZE use SIZE for main memory buffer</li>
<li>-t, –field-separator&#x3D;SEP use SEP instead of non-blank to blank transition</li>
<li>-T, –temporary-directory&#x3D;DIR use DIR for temporaries, not $TMPDIR or&#x2F;tmp;<br>multiple options specify multiple directories</li>
<li>-u, –unique with -c, check for strict ordering;<br>without -c, output only the first of an equal run</li>
<li>-z, –zero-terminated end lines with 0 byte, not newline</li>
<li>–help 显示此帮助信息并退出</li>
<li>–version 输出版本号信息并退出</li>
</ul>
<h4 id="sort的-o选项"><a href="#sort的-o选项" class="headerlink" title="sort的-o选项"></a>sort的-o选项</h4><p>由于sort默认是把结果输出到标准输出，所以需要用重定向才能将结果写入文件，形如sort oldfile &gt; newfile<br>但是，如果你想把排序结果输出到原文件中，用重定向可就不行了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[ericshenMacPro@root duweixin]$ sort -r duweixin.txt &gt; duweixin.txt</span><br><span class="line">[ericshenMacPro@root duweixin]$ cat duweixin.txt</span><br><span class="line">[ericshenMacPro@root duweixin]$</span><br></pre></td></tr></table></figure>
<p>看，竟然将duweixin清空了。</p>
<p>加上-o选项，解决了这个问题，让你放心的将结果写入原文件。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[ericshenMacPro@root duweixin]$ cat number.txt</span><br><span class="line">1</span><br><span class="line">3</span><br><span class="line">5</span><br><span class="line">2</span><br><span class="line">4</span><br><span class="line">[ericshenMacPro@root duweixin]$ sort -r number.txt -o number.txt</span><br><span class="line">[ericshenMacPro@root duweixin]$ cat number.txt</span><br><span class="line">5</span><br><span class="line">4</span><br><span class="line">3</span><br><span class="line">2</span><br><span class="line">1</span><br></pre></td></tr></table></figure>

<h4 id="sort的-t选项和-k选项"><a href="#sort的-t选项和-k选项" class="headerlink" title="sort的-t选项和-k选项"></a>sort的-t选项和-k选项</h4><p>如果有一个文件的内容是这样：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[ericshenMacPro@root duweixin]$ cat facebook.txt</span><br><span class="line">banana:30:5.5</span><br><span class="line">apple:10:2.5</span><br><span class="line">pear:90:2.3</span><br><span class="line">orange:20:3.4</span><br></pre></td></tr></table></figure>
<p>这个文件有三列，列与列之间用冒号隔开了，第一列表示水果类型，第二列表示水果数量，第三列表示水果价格。</p>
<p>那么我想以水果数量来排序，也就是以第二列来排序，如何利用sort实现？</p>
<p>幸好，sort提供了-t选项，后面可以设定间隔符。（是不是想起了cut和paste的-d选项，共鸣～～）</p>
<p>指定了间隔符之后，就可以用-k来指定列数了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[ericshenMacPro@root duweixin]$ sort -n -k 2 -t : facebook.txt</span><br><span class="line">apple:10:2.5</span><br><span class="line">orange:20:3.4</span><br><span class="line">banana:30:5.5</span><br><span class="line">pear:90:2.3</span><br></pre></td></tr></table></figure>
<p>我们使用冒号作为间隔符，并针对第二列来进行数值升序排序，结果很令人满意。</p>
<p>有时候学习脚本，你会发现sort命令后面跟了一堆类似-k1,2，或者-k1.2<br>-k3.4的东东，有些匪夷所思。今天，我们就来搞定它—-k选项！</p>
<h4 id="多列排序"><a href="#多列排序" class="headerlink" title="多列排序"></a>多列排序</h4><p>一、准备素材</p>
<p>第一个域是公司名称，第二个域是公司人数，第三个域是员工平均工资。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ cat duweixin.net.txt</span><br><span class="line">google 110 5000</span><br><span class="line">baidu 100 5000</span><br><span class="line">guge 50 3000</span><br><span class="line">sohu 100 4500</span><br></pre></td></tr></table></figure>
<p>二、 我想让这个文件按公司的字母顺序排序，也就是按第一个域进行排序：（这个duweixin.net.txt文件有三个域）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ sort -t ‘ ‘ -k 1 duweixin.net.txt</span><br><span class="line">baidu 100 5000</span><br><span class="line">google 110 5000</span><br><span class="line">guge 50 3000</span><br><span class="line">sohu 100 4500</span><br></pre></td></tr></table></figure>
<p>就直接用-k 1设定就可以了。（其实此处并不严格，稍后你就会知道）</p>
<p>三、我想让duweixin.net.txt按照公司人数排序</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ sort -n -t ‘ ‘ -k 2 duweixin.net.txt</span><br><span class="line">guge 50 3000</span><br><span class="line">baidu 100 5000</span><br><span class="line">sohu 100 4500</span><br><span class="line">google 110 5000</span><br></pre></td></tr></table></figure>
<p>但是，此处出现了问题，那就是baidu和sohu的公司人数相同，都是100人，这个时候怎么办呢？按照默认规矩，是从第一个域开始进行升序排序，因此baidu排在了sohu前面。</p>
<p>四、我想让facebook.txt按照公司人数排序 ，人数相同的按照员工平均工资升序排序：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ sort -n -t ‘ ‘ -k 2 -k 3 duweixin.net.txt</span><br><span class="line">guge 50 3000</span><br><span class="line">sohu 100 4500</span><br><span class="line">baidu 100 5000</span><br><span class="line">google 110 5000</span><br></pre></td></tr></table></figure>
<p>加了一个-k2 -k3就解决了问题。对滴，sort支持这种设定，就是说设定域排序的优先级，先以第2个域进行排序，如果相同，再以第3个域进行排序。</p>
<p>五、我想让facebook.txt按照员工工资降序排序，如果员工人数相同的，则按照公司人数升序排序</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ sort -n -t ‘ ‘ -k 3r -k 2 duweixin.net.txt</span><br><span class="line">baidu 100 5000</span><br><span class="line">google 110 5000</span><br><span class="line">sohu 100 4500</span><br><span class="line">guge 50 3000</span><br></pre></td></tr></table></figure>
<p>此处有使用了一些小技巧，你仔细看看，在-k 3后面偷偷加上了一个小写字母r。你想想，再结合我们上一篇文章，能得到答案么？揭晓：r和-r选项的作用是一样的，就是表示逆序。因为sort默认是按照升序排序的，所以此处需要加上r表示第三个域（员工平均工资）是按照降序排序。此处你还可以加上n，就表示对这个域进行排序时，要按照数值大小进行排序，举个例子吧：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ sort -t ‘ ‘ -k 3nr -k 2n duweixin.net.txt</span><br><span class="line">baidu 100 5000</span><br><span class="line">google 110 5000</span><br><span class="line">sohu 100 4500</span><br><span class="line">guge 50 3000</span><br></pre></td></tr></table></figure>
<p>去掉了最前面的-n选项，而是将它加入到了每一个-k选项中了。</p>
<p>示例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ awk -F&#39;|&#39; &#39;&#123;print $2&#125;&#39; nginx_access.log | uniq -c  | sort -n -r | head -n 10   #查询访问次数前10的ip地址。uniq -c 表示统计各行在文件中出现的次数</span><br><span class="line">   2582 120.26.40.76</span><br><span class="line">    826 120.26.40.76</span><br><span class="line">    716 120.26.40.76</span><br><span class="line">    525 120.26.40.76</span><br><span class="line">    424 120.26.40.76</span><br><span class="line">    325 120.26.40.76</span><br><span class="line">    235 120.26.40.76</span><br><span class="line">    233 120.26.40.76</span><br><span class="line">    226 120.26.40.76</span><br><span class="line">    120 120.26.40.76</span><br></pre></td></tr></table></figure>




<p>参考：**<a href="https://segmentfault.com/a/1190000005713784" target="_blank" rel="noopener">linux sort 多列正排序，倒排序</a>**</p>
<h4 id="uniq"><a href="#uniq" class="headerlink" title="uniq"></a>uniq</h4><p><strong>uniq</strong> - report or omit repeated lines(报告或省略重复的行)</p>
<p>描述：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uniq 命令删除文件中的重复行。uniq 命令读取由 InFile 参数指定的标准输入或文件。该命令首先比较相邻的行，然后除去第二行和该行的后续副本。重复的行一定相邻。（在发出 uniq 命令之前，请使用 sort 命令使所有重复行相邻。uniq命令这种方式估计是想节省系统资源）最后，uniq 命令将最终单独的行写到标准输出或由 OutFile 参数指定的文件。InFile 和 OutFile 参数必须指定不同的文件。</span><br></pre></td></tr></table></figure>
<p>格式：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uniq [OPTION]... [InFile [OutFile]]</span><br></pre></td></tr></table></figure>
<p><strong>OPTION:</strong></p>
<ul>
<li>-c :在输出行前面加上每行在文件中出现的次数</li>
<li>-d :仅显示重复行</li>
<li>-u :仅显示不重复的行</li>
</ul>
<p>示例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">$ cat fruit.txt </span><br><span class="line">apple</span><br><span class="line">banana</span><br><span class="line">orange</span><br><span class="line">apple</span><br><span class="line">$ uniq fruit.txt  #可以看到apple不是邻近的，所以无法去重</span><br><span class="line">apple</span><br><span class="line">banana</span><br><span class="line">orange</span><br><span class="line">apple</span><br><span class="line">$ uniq -d fruit.txt   </span><br><span class="line">$</span><br><span class="line">$ sort fruit.txt   #先排序，将相同的行安排在一起</span><br><span class="line">apple</span><br><span class="line">apple</span><br><span class="line">banana</span><br><span class="line">orange    </span><br><span class="line">$ sort fruit.txt | uniq  #排序后，去重</span><br><span class="line">apple</span><br><span class="line">banana</span><br><span class="line">orange</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$ awk -F&#39;|&#39; &#39;&#123;print $2&#125;&#39;nginx_access.log | sort -n  |uniq -c | sort -n | tail -n 10     #只有先sort后在uniq才能生效</span><br><span class="line">     28 122.192.13.58</span><br><span class="line">     31 183.212.188.57</span><br><span class="line">     31 223.104.4.82</span><br><span class="line">     35 223.104.4.61</span><br><span class="line">     36 112.20.81.240</span><br><span class="line">     71 183.209.48.38</span><br><span class="line">     86 122.96.43.243</span><br><span class="line">    216 183.208.16.53</span><br><span class="line">    616 49.77.231.174</span><br><span class="line">   6268 120.26.40.76</span><br></pre></td></tr></table></figure>
<h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><p>uniq必须得和sort一起使用才能够达到所需要的结果。</p>
<h4 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h4><p><strong><a href="https://www.linuxjournal.com/content/back-basics-sort-and-uniq" target="_blank" rel="noopener">Back to Basics: Sort and Uniq</a></strong></p>
<hr>
<h3 id="tar-amp-gzip"><a href="#tar-amp-gzip" class="headerlink" title="tar&amp;gzip"></a>tar&amp;gzip</h3><p>Linux下常见的压缩包格式有5种:zip tar.gz tar.bz2 tar.xz tar.Z</p>
<p>其中tar是种打包格式,gz和bz2等后缀才是指代压缩方式:gzip和bzip2。</p>
<h4 id="tar"><a href="#tar" class="headerlink" title="tar"></a>tar</h4><p>The Linux “tar” stands for tape archive, which is used by large number of Linux&#x2F;Unix system administrators to deal with tape drives backup. </p>
<p><strong>OPTION:</strong></p>
<ul>
<li>c – create a archive file.</li>
<li>x – extract a archive file.</li>
<li>v – show the progress of archive file.</li>
<li>f – filename + of archive file.</li>
<li>t – viewing content of archive file.</li>
<li>j  – filter archive through bzip2.</li>
<li>z – filter archive through gzip.</li>
<li>r – append or update files or directories to existing archive file.</li>
<li>W – Verify a archive file.</li>
<li>wildcards – Specify patterns in unix tar command.</li>
</ul>
<p>其中j,z参数代表在压缩时需要注意选择压缩格式。如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">1. Create tar Archive File</span><br><span class="line"></span><br><span class="line"> tar -cvf tecmint-14-09-12.tar &#x2F;home&#x2F;tecmint&#x2F;</span><br><span class="line"> </span><br><span class="line">2. Create tar.gz Archive File</span><br><span class="line"></span><br><span class="line">tar cvzf MyImages-14-09-12.tar.gz &#x2F;home&#x2F;MyImages</span><br><span class="line"></span><br><span class="line">3. Create tar.bz2 Archive File</span><br><span class="line"></span><br><span class="line"> tar cvfj Phpfiles-org.tar.bz2 &#x2F;home&#x2F;php</span><br></pre></td></tr></table></figure>

<p>事实上, <span style="color:red">从1.15版本开始tar就可以自动识别压缩的格式</span>,故不需人为区分压缩格式就能正确解压或者查看里面的内容。如解压文件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">tar -xvf filename.tar</span><br><span class="line">tar -xvf filename.tar.gz  </span><br><span class="line">tar -xvf filename.tar.bz2  </span><br><span class="line">tar -xvf filename.tar.xz  </span><br><span class="line">tar -xvf filename.tar.Z</span><br></pre></td></tr></table></figure>
<p>抑或查看打包内容：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">tar -tvf filename.tar</span><br><span class="line">tar -tvf filename.tar.gz  </span><br><span class="line">tar -tvf filename.tar.bz2  </span><br><span class="line">tar -tvf filename.tar.xz  </span><br><span class="line">tar -tvf filename.tar.Z</span><br></pre></td></tr></table></figure>
<h4 id="gzip"><a href="#gzip" class="headerlink" title="gzip"></a>gzip</h4><p>Gzip is one of the most popular compression algorithms that allow you to reduce the size of a file and keep the original file mode, ownership, and timestamp.</p>
<p>Gzip also refers to the .gz file format and the gzip utility which is used to compress and decompress files.</p>
<p>In this tutorial, we will show you how to use the gzip command.</p>
<h5 id="gzip-Command-Syntax"><a href="#gzip-Command-Syntax" class="headerlink" title="gzip Command Syntax"></a>gzip Command Syntax</h5><p>The general syntax for the gzip command is as follows:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gzip [OPTION]... [FILE]...</span><br></pre></td></tr></table></figure>

<p>Gzip compresses only single files and creates a compressed file for each given file. By convention, the name of a file compressed with Gzip should end with either .gz or .z.</p>
<p>If you want to compress multiple files or directory into one file, first you need to create a Tar archive and then compress the .tar file with Gzip. A file that ends in .tar.gz or .tgz is a Tar archive compressed with Gzip.</p>
<p>Gzip is most often used to compress text files, Tar archives, and web pages. <span style="color:red">Do not use Gzip to compress images, audio, PDF documents, and other binary files as they are already compressed</span>.</p>
<p><em>gzip</em> can compress only regular files. The <em>symbolic links</em> are ignored.</p>
<h5 id="Compressing-Files-with-gzip"><a href="#Compressing-Files-with-gzip" class="headerlink" title="Compressing Files with gzip"></a>Compressing Files with gzip</h5><p>To compress a single file invoke the gzip command followed by the filename:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gzip filename</span><br></pre></td></tr></table></figure>

<p>gzip will create a file filename.gz and delete the original file.</p>
<p>By default, gzip keeps the original file timestamp, mode, ownership, and name in the compressed file.</p>
<p>Keep the original file<br>If you want to keep the input (original) file, use the -k option:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gzip -k filename</span><br></pre></td></tr></table></figure>
<p>Another option to keep the original file is to use the -c option which tells gzip to write on standard output and redirect the output to a file:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gzip -c filename &gt; filename.gz</span><br></pre></td></tr></table></figure>
<h5 id="Verbose-output"><a href="#Verbose-output" class="headerlink" title="Verbose output"></a>Verbose output</h5><p>Use the -v option if you want to see the percentage reduction and the names of the files that are being processed:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gzip -v filename</span><br></pre></td></tr></table></figure>
<p>filename:      7.5% – replaced with filename.gz</p>
<h5 id="Compress-multiple-files"><a href="#Compress-multiple-files" class="headerlink" title="Compress multiple files"></a>Compress multiple files</h5><p>You can also pass multiple files as arguments to the command. For example, to compress the files named file1, file2, file3, you would run the following command:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gzip file1 file2 file3</span><br></pre></td></tr></table></figure>
<p>The command above will create three compressed files, file1.gz, file2.gz, file3.gz.</p>
<h5 id="Compress-all-files-in-a-directory"><a href="#Compress-all-files-in-a-directory" class="headerlink" title="Compress all files in a directory"></a>Compress all files in a directory</h5><p>To compress all files in a given directory, use the -r option:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gzip -r directory</span><br></pre></td></tr></table></figure>
<p><em>gzip</em> will recursively traverse through the whole directory structure and compress all the files in the directory and it’s subdirectories.</p>
<h5 id="Change-the-compression-level"><a href="#Change-the-compression-level" class="headerlink" title="Change the compression level"></a>Change the compression level</h5><p>gzip allows you to specify a range of compression levels, from 1 to 9. -1 or –fast means fastest compression speed with minimal compression ratio, -9 or –best indicates the slowest compression speed with maximum compression ratio. The default compression level is -6.</p>
<p>For example, to get maximum compression, you would run:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gzip -9 filename</span><br></pre></td></tr></table></figure>
<p>Compression is a CPU-intensive task, the higher the compression level, the longer the process takes.</p>
<h5 id="Using-standard-input"><a href="#Using-standard-input" class="headerlink" title="Using standard input"></a>Using standard input</h5><p>To create a .gz file from the stdin, pipe the output of the command to gzip. For example, to create a Gzipped MySQL database backup you would run:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqldump database_name | gzip -c &gt; database_name.sql.gz</span><br></pre></td></tr></table></figure>
<p>The output of the mysqldump command will be input for gzip.</p>
<h5 id="Decompressing-Files-with-gzip"><a href="#Decompressing-Files-with-gzip" class="headerlink" title="Decompressing Files with gzip"></a>Decompressing Files with gzip</h5><p>To decompress a .gz file , use the -d option:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gzip -d filename.gz</span><br></pre></td></tr></table></figure>
<p>Another command that you can use to decompress a Gzip file is gunzip . This command is basically an alias to gzip -d:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gunzip filename.gz</span><br></pre></td></tr></table></figure>
<p>You might find it easier to remember gunzip than gzip -d.</p>
<h5 id="Keep-the-compressed-file"><a href="#Keep-the-compressed-file" class="headerlink" title="Keep the compressed file"></a>Keep the compressed file</h5><p>Same as when compressing a file, the -k option tells gzip to keep the input file, in this case, that is the compressed file:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gzip -dk filename.gz</span><br></pre></td></tr></table></figure>
<h5 id="Decompress-multiple-files"><a href="#Decompress-multiple-files" class="headerlink" title="Decompress multiple files"></a>Decompress multiple files</h5><p>To decompress multiple files at once pass the filenames to gzip as arguments:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gzip -d file1.gz file2.gz file3.gz</span><br></pre></td></tr></table></figure>
<h5 id="Decompress-all-files-in-a-directory"><a href="#Decompress-all-files-in-a-directory" class="headerlink" title="Decompress all files in a directory"></a>Decompress all files in a directory</h5><p>When used with -d and -r options, gzip decompresses all files in a given directory recursively:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gzip -dr directory</span><br></pre></td></tr></table></figure>
<h5 id="List-the-Compressed-File-Contents"><a href="#List-the-Compressed-File-Contents" class="headerlink" title="List the Compressed File Contents"></a>List the Compressed File Contents</h5><p>When used with the -l option, gzip shows statistics about the given compressed files:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gzip -l filename</span><br></pre></td></tr></table></figure>
<p>The output will include the uncompressed file name, the compressed and uncompressed size, and the compression ratio:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">compressed        uncompressed  ratio uncompressed_name</span><br><span class="line">       130                 107   7.5% filename</span><br></pre></td></tr></table></figure>
<p>To get more information, add the -v option:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gzip -lv filename</span><br><span class="line">method  crc     date  time           compressed        uncompressed  ratio uncompressed_name</span><br><span class="line">defla a9b9e776 Sep  3 21:20                 130                 107   7.5% filename</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="du-amp-df"><a href="#du-amp-df" class="headerlink" title="du&amp;df"></a>du&amp;df</h3><h4 id="du"><a href="#du" class="headerlink" title="du"></a>du</h4><p>du command (short for disk usage) is useful command which is used to find disk usage for files &amp; directories. du command when used with various options provides results in many formats.</p>
<p><strong>Syntax :</strong>  </p>
<blockquote>
<p>du [OPTION]… [FILE]…<br>du [OPTION]… –files0-from&#x3D;F</p>
</blockquote>
<p><strong>Options :</strong></p>
<blockquote>
<ul>
<li>-0, –null : end each output line with NULL</li>
<li>-a, –all : write count of all files, not just directories</li>
<li>–apparent-size&gt; : print apparent sizes, rather than disk usage.</li>
<li>-B, –block-s&gt;ize&gt;&#x3D;SIZE : scale sizes to SIZE before printing on console</li>
<li>-c, –total : pro&gt;duce grand total</li>
<li>-d, –max-depth&#x3D;N :   print the total for a directory (or file, with –all) only if it is N or fewer levels below the command line argument;  –max-depth&#x3D;0 is the same as –summarize</li>
<li>-h, –human-readable : print sizes in human readable format</li>
<li>-S, -separate-dirs : for directories, don’t include size of subdirectories</li>
<li>-s, –summarize : display only total for each directory</li>
<li>–time : show time of last modification of any file or directory.</li>
<li>–exclude&#x3D;PATTERN : exclude files that match PATTERN</li>
</ul>
</blockquote>
<p>Some of the examples are mentioned below:-</p>
<ol>
<li><p>To find out summary of disk usage for a directory with all its sub-directories</p>
<p> $ du &#x2F;hexo</p>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">zzl@zzl-J:&#x2F;mnt&#x2F;Secert&#x2F;hexo$ du &#x2F;var</span><br><span class="line">4	&#x2F;var&#x2F;lib&#x2F;misc</span><br><span class="line">44	&#x2F;var&#x2F;lib&#x2F;app-info&#x2F;yaml</span><br><span class="line">240	&#x2F;var&#x2F;lib&#x2F;app-info&#x2F;icons&#x2F;ubuntu-bionic-updates-main&#x2F;64x64</span><br><span class="line">132	&#x2F;var&#x2F;lib&#x2F;app-info&#x2F;icons&#x2F;ubuntu-bionic-updates-main&#x2F;48x48</span><br><span class="line">376	&#x2F;var&#x2F;lib&#x2F;app-info&#x2F;icons&#x2F;ubuntu-bionic-updates-main</span><br></pre></td></tr></table></figure>
<p>Output of the command shows all the files &amp; directories in &#x2F;home with block size.</p>
<ol start="2">
<li><p>Disk usage with file&#x2F;directory sizes in human readable format I.e. in kb, mb etc</p>
<p> $ du -h &#x2F;var</p>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">zzl@zzl-J:&#x2F;mnt&#x2F;Secert&#x2F;hexo$ du -h &#x2F;var</span><br><span class="line">4.0K	&#x2F;var&#x2F;lib&#x2F;misc</span><br><span class="line">44K	&#x2F;var&#x2F;lib&#x2F;app-info&#x2F;yaml</span><br><span class="line">240K	&#x2F;var&#x2F;lib&#x2F;app-info&#x2F;icons&#x2F;ubuntu-bionic-updates-main&#x2F;64x64</span><br><span class="line">132K	&#x2F;var&#x2F;lib&#x2F;app-info&#x2F;icons&#x2F;ubuntu-bionic-updates-main&#x2F;48x48</span><br><span class="line">376K	&#x2F;var&#x2F;lib&#x2F;app-info&#x2F;icons&#x2F;ubuntu-bionic-updates-main</span><br><span class="line">8.0K	&#x2F;var&#x2F;lib&#x2F;app-info&#x2F;icons&#x2F;ubuntu-bionic-updates-multiverse&#x2F;64x64</span><br></pre></td></tr></table></figure>
<ol start="3">
<li><p>Total disk size of a directory</p>
<p> $ du -s &#x2F;home&#x2F;zzl</p>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">zzl@zzl-J:&#x2F;$ du -s &#x2F;home&#x2F;zzl&#x2F;</span><br><span class="line">8572584	&#x2F;home&#x2F;zzl&#x2F;</span><br><span class="line">zzl@zzl-J:&#x2F;$ du -sh &#x2F;home&#x2F;zzl&#x2F;</span><br><span class="line">8.2G	&#x2F;home&#x2F;zzl&#x2F;</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>To print sizes till particular level, use -d option with level no.<br> $ du -d 1 &#x2F;home&#x2F;zzl<br> or du –maxdepth&#x3D;1 &#x2F;home&#x2F;zzl</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">zzl@zzl-J:&#x2F;$ du -d 1 &#x2F;home&#x2F;zzl&#x2F;</span><br><span class="line">136	&#x2F;home&#x2F;zzl&#x2F;.m2</span><br><span class="line">2635600	&#x2F;home&#x2F;zzl&#x2F;.local</span><br><span class="line">868	&#x2F;home&#x2F;zzl&#x2F;snap</span><br><span class="line">8	&#x2F;home&#x2F;zzl&#x2F;.pip</span><br></pre></td></tr></table></figure>
<p>Now try with level 2, you will get some extra directories.<br>    $ du -d 2 &#x2F;home&#x2F;zzl<br>    or du –maxdepth&#x3D;2 &#x2F;home&#x2F;zzl</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">zzl@zzl-J:&#x2F;$ du -d 2 &#x2F;home&#x2F;zzl&#x2F;</span><br><span class="line">132	&#x2F;home&#x2F;zzl&#x2F;.m2&#x2F;repository</span><br><span class="line">136	&#x2F;home&#x2F;zzl&#x2F;.m2</span><br><span class="line">65548	&#x2F;home&#x2F;zzl&#x2F;.local&#x2F;lib</span><br><span class="line">1695880	&#x2F;home&#x2F;zzl&#x2F;.local&#x2F;idea-IU-203.7717.56</span><br><span class="line">32	&#x2F;home&#x2F;zzl&#x2F;.local&#x2F;bin</span><br><span class="line">100756	&#x2F;home&#x2F;zzl&#x2F;.local&#x2F;Telegram</span><br><span class="line">636576	&#x2F;home&#x2F;zzl&#x2F;.local&#x2F;share</span><br><span class="line">48	&#x2F;home&#x2F;zzl&#x2F;.local&#x2F;etc</span><br><span class="line">136756	&#x2F;home&#x2F;zzl&#x2F;.local&#x2F;redis-6.2.1</span><br><span class="line">2635600	&#x2F;home&#x2F;zzl&#x2F;.local</span><br><span class="line">320	&#x2F;home&#x2F;zzl&#x2F;snap&#x2F;gnome-system-monitor</span><br></pre></td></tr></table></figure>


<p><strong>ps</strong>: du外加sort排序让结果更直观,加-a不仅显示文档也显示文件大小：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">zzl@zzl-jinlan:~&#x2F;workspace$ du -a -d 1|sort -nr</span><br><span class="line">6135484	.</span><br><span class="line">2950316	.&#x2F;mopro</span><br><span class="line">1898144	.&#x2F;end</span><br><span class="line">1193172	.&#x2F;front</span><br><span class="line">93444	.&#x2F;claim.tar.gz</span><br><span class="line">404	.&#x2F;we-claim.zip</span><br></pre></td></tr></table></figure>


<h4 id="df"><a href="#df" class="headerlink" title="df"></a>df</h4><p>The df command (short for disk free), is used to display information related to file systems about total space and available space.</p>
<p><strong>Syntax :</strong></p>
<blockquote>
<p>df [OPTION]… [FILE]…  </p>
</blockquote>
<p><strong>Options :</strong></p>
<blockquote>
<ul>
<li>-a, –all : includes pseudo, duplicate and inaccessible file systems.</li>
<li>-B, –block-size&#x3D;SIZE : scales sizes by SIZE before printing them.</li>
<li>-h, –human-readable : print sizes in power of 1024</li>
<li>-H, –si: print sizes in power of 1000</li>
<li>-i, –inodes : list inode information instead of block usage</li>
<li>-l, –local : limit listing to local file systems</li>
<li>-P, –portability : use POSIX output format</li>
<li>–sync : invoke sync before getting usage info</li>
<li>–total : elide all entries insignificant to available space, and produce grand total</li>
<li>-t, –type&#x3D;TYPE : limit listing to file systems of type TYPE</li>
<li>-T, –print-type : print file system type</li>
</ul>
</blockquote>
<p>If no file name is given, it displays the space available on all currently mounted file systems.<br>For example :</p>
<p>df<br>Output :</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">zzl@zzl-J:~$ df</span><br><span class="line">Filesystem     1K-blocks      Used Available Use% Mounted on</span><br><span class="line">udev             3998520         0   3998520   0% &#x2F;dev</span><br><span class="line">tmpfs             804612      2108    802504   1% &#x2F;run</span><br><span class="line">&#x2F;dev&#x2F;nvme0n1p7  33203920  13543756  17943788  44% &#x2F;</span><br><span class="line">tmpfs            4023048    710744   3312304  18% &#x2F;dev&#x2F;shm</span><br><span class="line">tmpfs               5120         4      5116   1% &#x2F;run&#x2F;lock</span><br><span class="line">tmpfs            4023048         0   4023048   0% &#x2F;sys&#x2F;fs&#x2F;cgroup</span><br><span class="line">&#x2F;dev&#x2F;loop0        261760    261760         0 100% &#x2F;snap&#x2F;gnome-3-34-1804&#x2F;36</span><br><span class="line">&#x2F;dev&#x2F;loop2         66688     66688         0 100% &#x2F;snap&#x2F;gtk-common-themes&#x2F;1515</span><br><span class="line">&#x2F;dev&#x2F;loop3          1024      1024         0 100% &#x2F;snap&#x2F;gnome-logs&#x2F;100</span><br><span class="line">&#x2F;dev&#x2F;loop1         56832     56832         0 100% &#x2F;snap&#x2F;core18&#x2F;1988</span><br><span class="line">&#x2F;dev&#x2F;loop4           384       384         0 100% &#x2F;snap&#x2F;gnome-characters&#x2F;570</span><br><span class="line">&#x2F;dev&#x2F;loop7          2304      2304         0 100% &#x2F;snap&#x2F;gnome-system-monitor&#x2F;148</span><br><span class="line">&#x2F;dev&#x2F;loop6        101632    101632         0 100% &#x2F;snap&#x2F;core&#x2F;10908</span><br><span class="line">&#x2F;dev&#x2F;loop5         33152     33152         0 100% &#x2F;snap&#x2F;snapd&#x2F;11588</span><br><span class="line">&#x2F;dev&#x2F;loop8        101632    101632         0 100% &#x2F;snap&#x2F;core&#x2F;10958</span><br><span class="line">&#x2F;dev&#x2F;loop9           640       640         0 100% &#x2F;snap&#x2F;gnome-logs&#x2F;103</span><br><span class="line">&#x2F;dev&#x2F;loop10         2304      2304         0 100% &#x2F;snap&#x2F;gnome-system-monitor&#x2F;157</span><br><span class="line">&#x2F;dev&#x2F;loop13         2560      2560         0 100% &#x2F;snap&#x2F;gnome-calculator&#x2F;884</span><br><span class="line">&#x2F;dev&#x2F;loop11       224256    224256         0 100% &#x2F;snap&#x2F;gnome-3-34-1804&#x2F;66</span><br><span class="line">&#x2F;dev&#x2F;loop12        63616     63616         0 100% &#x2F;snap&#x2F;gtk-common-themes&#x2F;1506</span><br><span class="line">&#x2F;dev&#x2F;loop14        56832     56832         0 100% &#x2F;snap&#x2F;core18&#x2F;1997</span><br><span class="line">&#x2F;dev&#x2F;loop15          384       384         0 100% &#x2F;snap&#x2F;gnome-characters&#x2F;708</span><br><span class="line">&#x2F;dev&#x2F;loop16        33152     33152         0 100% &#x2F;snap&#x2F;snapd&#x2F;11402</span><br><span class="line">&#x2F;dev&#x2F;loop17         2560      2560         0 100% &#x2F;snap&#x2F;gnome-calculator&#x2F;748</span><br><span class="line">&#x2F;dev&#x2F;nvme0n1p1    262144     36868    225276  15% &#x2F;boot&#x2F;efi</span><br><span class="line">&#x2F;dev&#x2F;nvme0n1p8  34464424   8620596  24063400  27% &#x2F;home</span><br><span class="line">&#x2F;dev&#x2F;sda2      244073468 183912216  60161252  76% &#x2F;mnt&#x2F;Workspace</span><br><span class="line">&#x2F;dev&#x2F;sda1      244308988 193341424  50967564  80% &#x2F;mnt&#x2F;Secert</span><br><span class="line">tmpfs             804608        16    804592   1% &#x2F;run&#x2F;user&#x2F;121</span><br><span class="line">tmpfs             804608        28    804580   1% &#x2F;run&#x2F;user&#x2F;1000</span><br><span class="line">overlay         33203920  13543756  17943788  44% &#x2F;var&#x2F;lib&#x2F;docker&#x2F;overlay2&#x2F;de94e0676e57477d87aba630ff494dd43ad714de367cf5031e544f25bb613f64&#x2F;merged</span><br></pre></td></tr></table></figure>
<p><strong>df usage Examples with options :</strong></p>
<ol>
<li><p>If you want to display all the file system, use -a option.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df -a</span><br></pre></td></tr></table></figure>
<p>Output :</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">zzl@zzl-J:~$ df -a</span><br><span class="line">Filesystem     1K-blocks      Used Available Use% Mounted on</span><br><span class="line">sysfs                  0         0         0    - &#x2F;sys</span><br><span class="line">proc                   0         0         0    - &#x2F;proc</span><br><span class="line">udev             3998520         0   3998520   0% &#x2F;dev</span><br><span class="line">devpts                 0         0         0    - &#x2F;dev&#x2F;pts</span><br><span class="line">tmpfs             804612      2108    802504   1% &#x2F;run</span><br><span class="line">&#x2F;dev&#x2F;nvme0n1p7  33203920  13543884  17943660  44% &#x2F;</span><br><span class="line">securityfs             0         0         0    - &#x2F;sys&#x2F;kernel&#x2F;security</span><br><span class="line">tmpfs            4023048    705236   3317812  18% &#x2F;dev&#x2F;shm</span><br><span class="line">tmpfs               5120         4      5116   1% &#x2F;run&#x2F;lock</span><br><span class="line">tmpfs            4023048         0   4023048   0% &#x2F;sys&#x2F;fs&#x2F;cgroup</span><br><span class="line">cgroup                 0         0         0    - &#x2F;sys&#x2F;fs&#x2F;cgroup&#x2F;unified</span><br><span class="line">cgroup                 0         0         0    - &#x2F;sys&#x2F;fs&#x2F;cgroup&#x2F;systemd</span><br><span class="line">pstore                 0         0         0    - &#x2F;sys&#x2F;fs&#x2F;pstore</span><br><span class="line">efivarfs               0         0         0    - &#x2F;sys&#x2F;firmware&#x2F;efi&#x2F;efivars</span><br><span class="line">cgroup                 0         0         0    - &#x2F;sys&#x2F;fs&#x2F;cgroup&#x2F;cpu,cpuacct</span><br></pre></td></tr></table></figure>
<p>The above is not complete output, but you can see that the information shown is extended to info provided by df command.</p>
</li>
<li><p>Use -h option to display size in power of 1024</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df -h &#x2F;home&#x2F;mandeep</span><br></pre></td></tr></table></figure>
<p>Output :</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Filesystem      Size  Used Avail Use% Mounted on</span><br><span class="line">&#x2F;dev&#x2F;sda10       76G   65G  7.0G  91% &#x2F;home</span><br></pre></td></tr></table></figure></li>
<li><p>Use -H option to display sizes in power of 1000</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df -H &#x2F;home&#x2F;mandeep</span><br></pre></td></tr></table></figure>
<p>Output :</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Filesystem      Size  Used Avail Use% Mounted on</span><br><span class="line">&#x2F;dev&#x2F;sda10       81G   70G  7.5G  91% &#x2F;home</span><br></pre></td></tr></table></figure>
<p>You can observe the size section of two command with -h and -H option for difference.</p>
</li>
<li><p>To get complete grand total, use –total option</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df --total</span><br></pre></td></tr></table></figure>
<p>Output :</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Filesystem     1K-blocks     Used Available Use% Mounted on</span><br><span class="line">udev             3996816        0   3996816   0% &#x2F;dev</span><br><span class="line">tmpfs             804624    10072    794552   2% &#x2F;run</span><br><span class="line">&#x2F;dev&#x2F;sda9       68117056 18036336  46597536  28% &#x2F;</span><br><span class="line">tmpfs            4023116    50140   3972976   2% &#x2F;dev&#x2F;shm</span><br><span class="line">tmpfs               5120        4      5116   1% &#x2F;run&#x2F;lock</span><br><span class="line">tmpfs            4023116        0   4023116   0% &#x2F;sys&#x2F;fs&#x2F;cgroup</span><br><span class="line">&#x2F;dev&#x2F;loop0         88832    88832         0 100% &#x2F;snap&#x2F;simplescreenrecorder&#x2F;1</span><br><span class="line">&#x2F;dev&#x2F;loop2         85888    85888         0 100% &#x2F;snap&#x2F;core&#x2F;3748</span><br><span class="line">&#x2F;dev&#x2F;loop3         85888    85888         0 100% &#x2F;snap&#x2F;core&#x2F;3604</span><br><span class="line">&#x2F;dev&#x2F;loop1         83328    83328         0 100% &#x2F;snap&#x2F;core&#x2F;3887</span><br><span class="line">&#x2F;dev&#x2F;sda10      78873504 67529320   7314540  91% &#x2F;home</span><br><span class="line">&#x2F;dev&#x2F;sda1         507904    30908    476996   7% &#x2F;boot&#x2F;efi</span><br><span class="line">tmpfs             804624       12    804612   1% &#x2F;run&#x2F;user&#x2F;121</span><br><span class="line">tmpfs             804624       64    804560   1% &#x2F;run&#x2F;user&#x2F;1000</span><br><span class="line">total          162304440 86000792  68790820  56% -</span><br></pre></td></tr></table></figure>
<p>Observe the last row of above table output, it specifies grand total.</p>
</li>
<li><p>Use -T option to display file type<br>For example:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df -T &#x2F;home&#x2F;mandeep</span><br></pre></td></tr></table></figure>
<p>Output :</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Filesystem     Type 1K-blocks     Used Available Use% Mounted on</span><br><span class="line">&#x2F;dev&#x2F;sda10     ext4  78873504 67528128   7315732  91% &#x2F;home</span><br></pre></td></tr></table></figure>
<p>You can see the file type for &#x2F;home&#x2F;mandeep is ext4.</p>
</li>
<li><p>And for more help, you can use –help option.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df --help</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="rsync-amp-cp"><a href="#rsync-amp-cp" class="headerlink" title="rsync&amp;cp"></a>rsync&amp;cp</h3><p>Copying files and directories is one of the most common tasks for any system administrator.</p>
<p>The cp command is a very simple command used to copy files and directories in Linux.</p>
<p>You can also use Rsync command to backup and copy files and directories. In order to copy files and directories, you must have write permission on the target directory.</p>
<h4 id="cp"><a href="#cp" class="headerlink" title="cp"></a>cp</h4><p>The basic syntax for cp command is shown below:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp [option] [source] [destination]</span><br></pre></td></tr></table></figure>

<p>A brief explanation of each option is shown below (Note that these are Case Sensitive):</p>
<blockquote>
<ul>
<li>-i : Used to prompt before copying.</li>
<li>-v : Display verbose output during the copying process.</li>
<li>-d : Used to copy a link file.</li>
<li>-b : Create a backup copy of the destination file before overwriting.</li>
<li>-n : Don’t overwrite an existing file.</li>
<li>-R : Used to copy directory recursively.</li>
<li>-p : Used to keeps the file creation date and file permissions.</li>
<li>-u : update - copy when source is newer than dest</li>
</ul>
</blockquote>
<h4 id="rsync"><a href="#rsync" class="headerlink" title="rsync"></a>rsync</h4><p><em>rsync</em> is a fast and versatile command-line utility for synchronizing files and directories between two locations over a remote shell, or from&#x2F;to a remote Rsync daemon. It provides fast incremental file transfer by transferring only the differences between the source and the destination.</p>
<p>Rsync can be used for mirroring data, incremental backups, copying files between systems, and as a replacement for <em>scp</em> , <em>sftp</em> , and <em>cp</em> commands.</p>
<p>Local use:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rsync [OPTION...] SRC... [DEST]</span><br></pre></td></tr></table></figure>
<p>Access via remote shell (PULL):</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rsync [OPTION...] [USER@]HOST:SRC... [DEST]</span><br></pre></td></tr></table></figure>
<p>Access via remote shell (PUSH):</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rsync [OPTION...] SRC... [USER@]HOST:DEST</span><br></pre></td></tr></table></figure>
<p>Access via rsync daemon (PULL):</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rsync [OPTION...] [USER@]HOST::SRC... [DEST]</span><br><span class="line">rsync [OPTION...] rsync:&#x2F;&#x2F;[USER@]HOST[:PORT]&#x2F;SRC... [DEST]</span><br></pre></td></tr></table></figure>
<p>Access via rsync daemon (PUSH):</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rsync [OPTION...] SRC... [USER@]HOST::DEST</span><br><span class="line">rsync [OPTION...] SRC... rsync:&#x2F;&#x2F;[USER@]HOST[:PORT]&#x2F;DEST</span><br></pre></td></tr></table></figure>
<p>Usages with only one SRC argument and no DEST argument list the source files instead of copying.</p>
<p><em>rsync</em> provides a number of options that control how the command behaves. The most widely used options are:</p>
<blockquote>
<ul>
<li>-a, –archive, archive mode, equivalent to -rlptgoD. This option tells rsync to syncs directories recursively, transfer special and block devices, preserve symbolic links, modification times, groups, ownership, and permissions.</li>
<li>-z, –compress. This option forces rsync to compresses the data as it is sent to the destination machine. Use this option only if the connection to the remote machine is slow.</li>
<li>-P, equivalent to –partial –progress. When this option is used, rsync shows a progress bar during the transfer and keeps the partially transferred files. It is useful when transferring large files over slow or unstable network connections.</li>
<li>–delete. When this option is used, rsync deletes extraneous files from the destination location. It is useful for mirroring.</li>
<li>-q, –quiet. Use this option if you want to suppress non-error messages.</li>
<li>-e. This option allows you to choose a different remote shell. By default, rsync is configured to use ssh.</li>
</ul>
</blockquote>
<p><a href="https://www.computerhope.com/unix/rsync.htm" target="_blank" rel="noopener">for more optios</a></p>
<h5 id="Basic-Rsync-Usage"><a href="#Basic-Rsync-Usage" class="headerlink" title="Basic Rsync Usage"></a>Basic Rsync Usage</h5><p>The most basic use case of rsync is to copy a single file from one to another local location. Here is an example:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rsync -a &#x2F;opt&#x2F;filename.zip &#x2F;tmp&#x2F;</span><br></pre></td></tr></table></figure>

<p>The user running the command must have read permissions on the source location and write permissions on the destination.</p>
<p>Omitting the filename from the destination location copies the file with the current name. If you want to save the file under a different name, specify the new name on the destination part:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rsync -a &#x2F;opt&#x2F;filename.zip &#x2F;tmp&#x2F;newfilename.zip</span><br></pre></td></tr></table></figure>

<p>The real power of rsync comes when synchronizing directories. The example below shows how to create a local backup of website files:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rsync -a &#x2F;var&#x2F;www&#x2F;domain.com&#x2F;public_html&#x2F; &#x2F;var&#x2F;www&#x2F;domain.com&#x2F;public_html_backup&#x2F;</span><br></pre></td></tr></table></figure>
<p>If the destination directory doesn’t exist, rsync will create it.</p>
<p>It is worth mentioning that rsync gives different treatment to the source directories with a trailing <strong>slash (&#x2F;)</strong>. If the source directory has a trailing slash, the command will copy only the directory contents to the destination directory. When the trailing slash is omitted, rsync copies the source directory inside the destination directory.</p>
<h5 id="Using-rsync-to-Sync-Data-from-x2F-to-a-remote-Machine"><a href="#Using-rsync-to-Sync-Data-from-x2F-to-a-remote-Machine" class="headerlink" title="Using rsync to Sync Data from&#x2F;to a remote Machine"></a>Using rsync to Sync Data from&#x2F;to a remote Machine</h5><p>When using rsync to transfer data remotely , it must be installed on both the source and the destination machine. The new versions of rsync are configured to use SSH as default remote shell.</p>
<p>In the following example, we are transferring a directory from a local to a remote machine:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rsync -a &#x2F;opt&#x2F;media&#x2F; remote_user@remote_host_or_ip:&#x2F;opt&#x2F;media&#x2F;</span><br></pre></td></tr></table></figure>
<p>If you haven’t set a passwordless SSH login to the remote machine, you will be asked to enter the user password.<br>To transfer data from a remote to a local machine, use the remote location as a source:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rsync -a remote_user@remote_host_or_ip:&#x2F;opt&#x2F;media&#x2F; &#x2F;opt&#x2F;media&#x2F;</span><br></pre></td></tr></table></figure>
<p>If SSH on the remote host is listening on a port other than the default 22 , specify the port using the -e option:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rsync -a -e &quot;ssh -p 2322&quot; &#x2F;opt&#x2F;media&#x2F; remote_user@remote_host_or_ip:&#x2F;opt&#x2F;media&#x2F;</span><br></pre></td></tr></table></figure>
<p>When transferring large amounts of data it is recommended to run the rsync command inside a screen session or to use the -P option:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rsync -a -P remote_user@remote_host_or_ip:&#x2F;opt&#x2F;media&#x2F; &#x2F;opt&#x2F;media&#x2F;</span><br></pre></td></tr></table></figure>

<h5 id="Exclude-Files-and-Directories"><a href="#Exclude-Files-and-Directories" class="headerlink" title="Exclude Files and Directories"></a>Exclude Files and Directories</h5><p>There are two options to exclude files and directories. The first option is to use the –exclude argument and specify the files and directories you want to exclude on the command line.</p>
<p>When excluding files or directories , you need to use their relative paths to the source location.</p>
<p>In the following example shows how exclude the node_modules and tmp directories:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rsync -a --exclude&#x3D;node_modules --exclude&#x3D;tmp &#x2F;src_directory&#x2F; &#x2F;dst_directory&#x2F;</span><br></pre></td></tr></table></figure>
<p>The second option is to use the –exclude-from option and specify the files and directories you want to exclude in a file.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rsync -a --exclude-from&#x3D;&#39;&#x2F;exclude-file.txt&#39; &#x2F;src_directory&#x2F; &#x2F;dst_directory&#x2F;</span><br><span class="line">&#x2F;exclude-file.txt</span><br></pre></td></tr></table></figure>

<h5 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h5><p>We have shown you how to use Rsync to copy and synchronize files and directories. There’s lots more to learn about Rsync at <strong><a href="https://download.samba.org/pub/rsync/rsync.html" target="_blank" rel="noopener">Rsync User’s Manual page</a></strong>.</p>

    </div>

    
    
    
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>zzl
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="http://blog.zhangzonglinagain.xyz/2021/04/19/linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/" title="linux常用命令">http://blog.zhangzonglinagain.xyz/2021/04/19/linux常用命令/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>


      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2021/04/16/linux%E5%B0%8F%E6%8A%80%E5%B7%A7/" rel="prev" title="linux小技巧">
      <i class="fa fa-chevron-left"></i> linux小技巧
    </a></div>
      <div class="post-nav-item">
    <a href="/2021/04/19/markdown%E5%86%85%E5%AE%B9%E6%8A%98%E5%8F%A0/" rel="next" title="markdown的html标签应用及常用语法">
      markdown的html标签应用及常用语法 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#前言"><span class="nav-number">1.</span> <span class="nav-text">前言</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#type"><span class="nav-number">2.</span> <span class="nav-text">type</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ll-amp-ls"><span class="nav-number">3.</span> <span class="nav-text">ll&amp;ls</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#xdg-open"><span class="nav-number">4.</span> <span class="nav-text">xdg-open</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#sort-uniq"><span class="nav-number">5.</span> <span class="nav-text">sort uniq</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#sort"><span class="nav-number">5.1.</span> <span class="nav-text">sort</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#sort的-o选项"><span class="nav-number">5.2.</span> <span class="nav-text">sort的-o选项</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#sort的-t选项和-k选项"><span class="nav-number">5.3.</span> <span class="nav-text">sort的-t选项和-k选项</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#多列排序"><span class="nav-number">5.4.</span> <span class="nav-text">多列排序</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#uniq"><span class="nav-number">5.5.</span> <span class="nav-text">uniq</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#总结"><span class="nav-number">5.6.</span> <span class="nav-text">总结</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#参考"><span class="nav-number">5.7.</span> <span class="nav-text">参考</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#tar-amp-gzip"><span class="nav-number">6.</span> <span class="nav-text">tar&amp;gzip</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#tar"><span class="nav-number">6.1.</span> <span class="nav-text">tar</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#gzip"><span class="nav-number">6.2.</span> <span class="nav-text">gzip</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#gzip-Command-Syntax"><span class="nav-number">6.2.1.</span> <span class="nav-text">gzip Command Syntax</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Compressing-Files-with-gzip"><span class="nav-number">6.2.2.</span> <span class="nav-text">Compressing Files with gzip</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Verbose-output"><span class="nav-number">6.2.3.</span> <span class="nav-text">Verbose output</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Compress-multiple-files"><span class="nav-number">6.2.4.</span> <span class="nav-text">Compress multiple files</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Compress-all-files-in-a-directory"><span class="nav-number">6.2.5.</span> <span class="nav-text">Compress all files in a directory</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Change-the-compression-level"><span class="nav-number">6.2.6.</span> <span class="nav-text">Change the compression level</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Using-standard-input"><span class="nav-number">6.2.7.</span> <span class="nav-text">Using standard input</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Decompressing-Files-with-gzip"><span class="nav-number">6.2.8.</span> <span class="nav-text">Decompressing Files with gzip</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Keep-the-compressed-file"><span class="nav-number">6.2.9.</span> <span class="nav-text">Keep the compressed file</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Decompress-multiple-files"><span class="nav-number">6.2.10.</span> <span class="nav-text">Decompress multiple files</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Decompress-all-files-in-a-directory"><span class="nav-number">6.2.11.</span> <span class="nav-text">Decompress all files in a directory</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#List-the-Compressed-File-Contents"><span class="nav-number">6.2.12.</span> <span class="nav-text">List the Compressed File Contents</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#du-amp-df"><span class="nav-number">7.</span> <span class="nav-text">du&amp;df</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#du"><span class="nav-number">7.1.</span> <span class="nav-text">du</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#df"><span class="nav-number">7.2.</span> <span class="nav-text">df</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#rsync-amp-cp"><span class="nav-number">8.</span> <span class="nav-text">rsync&amp;cp</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#cp"><span class="nav-number">8.1.</span> <span class="nav-text">cp</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#rsync"><span class="nav-number">8.2.</span> <span class="nav-text">rsync</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Basic-Rsync-Usage"><span class="nav-number">8.2.1.</span> <span class="nav-text">Basic Rsync Usage</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Using-rsync-to-Sync-Data-from-x2F-to-a-remote-Machine"><span class="nav-number">8.2.2.</span> <span class="nav-text">Using rsync to Sync Data from&#x2F;to a remote Machine</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Exclude-Files-and-Directories"><span class="nav-number">8.2.3.</span> <span class="nav-text">Exclude Files and Directories</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Conclusion"><span class="nav-number">8.2.4.</span> <span class="nav-text">Conclusion</span></a></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="zzl"
      src="/images/lizi.png">
  <p class="site-author-name" itemprop="name">zzl</p>
  <div class="site-description" itemprop="description">哥哥姐姐的梦</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">116</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">21</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">65</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/zhangzonglin" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;zhangzonglin" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:zhanglinjinlan@gmail.com" title="E-Mail → mailto:zhanglinjinlan@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="/atom.xml" title="RSS → &#x2F;atom.xml"><i class="fa fa-fw fa-rss"></i>RSS</a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">zzl</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
      <span class="post-meta-item-text">站点总字数：</span>
    <span title="站点总字数">131k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span class="post-meta-item-text">站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">1:59</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v4.2.1
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">主题 – <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.7.0
  </div>

        








      </div>
    </footer>
  </div>

  
  
  <script color='0,0,255' opacity='0.5' zIndex='-1' count='99' src="//cdn.jsdelivr.net/gh/theme-next/theme-next-canvas-nest@1/canvas-nest.min.js"></script>
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>

<script src="/js/bookmark.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el: '#valine-comments',
      verify: false,
      notify: false,
      appId: 'uRPDywhEFou9N5nuhvjMxx6u-MdYXbMMI',
      appKey: 'vta8LRoByDLj7y24h2xbeFcK',
      placeholder: "请输入",
      avatar: 'mm',
      meta: guest,
      pageSize: '10' || 10,
      visitor: false,
      lang: '' || 'zh-cn',
      path: location.pathname,
      recordIP: false,
      serverURLs: ''
    });
  }, window.Valine);
});
</script>

</body>
</html>
